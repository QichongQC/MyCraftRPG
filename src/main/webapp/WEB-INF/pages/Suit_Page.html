<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="static/CSS/testHomeCss.css" rel="stylesheet">
    <link href="/static/CSS/testHomeCSS2.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js"></script>
</head>
<body>
<div class="layui-container">
    <!--    //todo åå°3-->
    <th:block th:if="${userStatus != null}">
        <div class="layui-col-md2">
            <div class="layui-panel site-menu" style="width: 235px;">
                <ul class="layui-menu layui-menu-lg">
                    <li class="layui-menu-item-group" lay-options="{type: 'group', isAllowSpread: true}"
                        style="height: 1200px">
                        <ul>
                            <th:block th:each="item,state:${admin_modules}">
                                <li th:class="${#request.getRequestURL().toString().contains(state.current.value)}?'layui-menu-item-checked':''"
                                >
                                    <div class="layui-menu-body-title">
                                        <a th:href="${state.current.value}" th:text="${state.current.key}"></a>
                                        <span class="layui-font-12 layui-font-gray"> </span>
                                    </div>
                                </li>
                            </th:block>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </th:block>

    <div class="layui-col-md9">
        <form action="/Suit_Page" id="submitForm" method="get">
            <input id="pageIndex" name="current" type="hidden"/>
            <input id="input_name" name="name" th:value="${search_model.name}" type="hidden"/>
        </form>
        <div class="layui-col-md12" style="margin-top: 30px;margin-left: 80px">
            <div class="layui-form">
                <div class="layui-input-inline" style="width: 200px">
                    <div class="layui-input-block" style="margin-left: 0">
                        <input autocomplete="off" class="layui-input" id="input_suitName" name="name"
                               placeholder="è¯·è¾“å…¥å¥—è£…åç§°" required="" th:value="${search_model.name}" type="text" value="">
                    </div>
                </div>
                <div class="layui-input-inline">
                    <div class="layui-input-block" style="margin-left: 0;right: 0px">
                        <button class="layui-btn" onclick="doSearchWithResetPageIndex()" type="button">æŸ¥è¯¢</button>
                        <button class="layui-btn" onclick="clearSearchCondition()" style="background-color: indianred">
                            æ¸…é™¤æŸ¥è¯¢æ¡ä»¶
                        </button>
                    </div>
                </div>
            </div>
            <script>
                function clearSearchCondition() {
                    $('#input_suitName').val();
                }

                function doSearchWithResetPageIndex() {
                    $('#pageIndex').val(1);
                    $('#input_name').val($('#input_suitName').val())
                    $('#submitForm').submit()
                }

                function skipToUpdate(id){
                    window.location.href="/Suit_Detail/"+id;
                }
                function delete_equiment(id){
                    let juxu=false;
                    layer.open({
                        title: 'ç¡®å®šè¦åˆ é™¤è¯¥æ•°æ®å—ï¼Ÿ'
                        ,yes: function(index, layero){
                            deleteAjax(id)
                        },
                        cancel:function (){
                            return;
                        }
                    });
                }
                function deleteAjax(id){
                    if (isNaN(id)){
                        alert("æğŸçš„ï¼Œç»™æˆ‘æ•´æ´»æ˜¯å§ï¼Ÿ")
                        return;
                    }
                    $.ajax({
                        // url: è¯·æ±‚åœ°å€
                        url: '/Admin/Suit/Delete/'+id,
                        // type: è¯·æ±‚æ–¹å¼ï¼Œé»˜è®¤æ˜¯"GET"ï¼Œå¸¸ç”¨çš„è¿˜æœ‰"POST"
                        type: "POST",
                        // dataType: è®¾ç½®æœåŠ¡å™¨è¿”å›çš„æ•°æ®æ ¼å¼ï¼Œå¸¸ç”¨çš„æ˜¯ json æ ¼å¼
                        dataType: "JSON",
                        // data: è®¾ç½®å‘é€ç»™æœåŠ¡å™¨çš„æ•°æ®ï¼Œæ²¡æœ‰å‚æ•°ä¸éœ€è®¾ç½®

                        // success: è®¾ç½®è¯·æ±‚æˆåŠŸåçš„å›è°ƒå‡½æ•°
                        success: function(response) {
                            if (response.status==0){
                                layer.msg("åˆ é™¤å¤±è´¥ï¼")
                            }else {
                                layer.msg("åˆ é™¤æˆåŠŸï¼Œè¯¥æ•°æ®ä¼šåœ¨ä¸€åˆ†é’Ÿå†…ç§»é™¤ç¼“å­˜ã€‚");
                            }
                        },
                        // error: è®¾ç½®è¯·æ±‚å¤±è´¥åçš„å›è°ƒå‡½æ•°
                        error: function() {
                            alert("è¯·æ±‚å¤±è´¥ï¼è¯·è”ç³»ç®¡ç†å‘˜ï¼");
                        },
                        // asyncï¼šè®¾ç½®è¯·æ±‚æ˜¯å¦å¼‚æ­¥ï¼Œé»˜è®¤æ˜¯trueï¼Œè¡¨ç¤ºå¼‚æ­¥ï¼Œä¸€èˆ¬ä¸ç”¨å†™
                        async: true
                    })
                }

            </script>
        </div>


        <div class="recommendation" data-v-07ba051a="" data-v-50214cd5="" style="height: 1200px">
            </style>
            <th:block th:if="${suit_list} !=null and ${suit_list.size()>0}">
                <div class="project-list-wrapper">
                    <div class="project-list" th:each="suit :${suit_list}">
                        <a class="project-list-item"
                           style="width: 450px;margin-left: 60px"
                           >
                            <button class="layui-btn layui-btn-normal" data-method="offset" data-type="auto"
                                    th:onclick="delete_equiment([[${suit.id}]])"
                                    style="margin-left: 381px;position: absolute;z-index: 5">åˆ é™¤
                            </button>
                            <div class="project-list-item-img" th:inline="css" th:onclick="skipToUpdate([[${suit.id}]])"
                                 th:style="'background-image:url('+${suit.picture}+')'"></div>
                            <div class="project-list-item-detail" th:onclick="skipToUpdate([[${suit.id}]])">
                                <div class="project-list-item-title"  style="-webkit-box-orient: vertical;"
                                     th:text="${suit.name}"></div>
                                <div class="project-list-item-time">
                                    <div>
                                        <div class="project-list-item-address">
                                            <span class="venue-name-and-address" style="max-width: 230px"
                                                  th:text="${suit.describe}"></span>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </a>

                    </div>
                </div>
            </th:block>

            <!-------------------------é¡µç æ¡---------------------------------------->


            <th:block th:if="${suit_list!=null}">
                <div class="whole-pagination-wrapper" style="width: 1100px">
                    <div class="pagination-wrapper">
                        <div th:class="${paging.current>1}?'arrow pagination-left-arrow ':'arrow pagination-left-arrow  disabled'"
                             th:onclick="${paging.current>1}?'setPageIndex_bynum('+${paging.current-1}+')':''"></div>

                        <div class="pagination">
                            <th:block th:if="${paging.current-1>1}">
                                <span class="pageNum" th:text="1"></span>
                                <span class="pageNum">...</span>
                            </th:block>
                            <th:block th:each="i:${#numbers.sequence(paging.barStart,paging.barEnd)}">
                                <span th:class="${paging.current==i}?'pageNum active':'pageNum'" th:text="${i}"></span>
                            </th:block>
                            <th:block th:if="${paging.barEnd<paging.pages}">
                                <span class="pageNum">...</span>
                                <span class="pageNum" th:text="${paging.pages}"></span>
                            </th:block>
                        </div>
                        <div th:class="${paging.current<paging.pages}?'arrow pagination-right-arrow':'arrow pagination-right-arrow disabled'"
                             th:onclick="${paging.current<paging.pages}?'setPageIndex_bynum('+${paging.current+1}+')':''"></div>
                    </div>
                </div>
            </th:block>


            <script>
                $(function () {
                    $('.pageNum').click(setPageIndex)
                })

                function setPageIndex(e) {
                    num = e.target.innerText;
                    //å¦‚æœæ˜¯æ•°å­—
                    if (isNaN(num)) {
                        return
                    }
                    $('#pageIndex').val(num)
                    doSearch()
                }

                function doSearch() {
                    $('#submitForm').submit();
                }

                function setPageIndex_bynum(current) {
                    $('#pageIndex').val(current);
                    doSearch()
                }
            </script>
            <div style="height: 80px"></div>
        </div>

    </div>
</div>

</body>
</html>